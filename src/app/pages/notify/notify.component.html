<div class="p-4 max-w-2xl mx-auto">
    <h1 class="text-xl font-semibold mb-3">Detalle de notificación</h1>

    <div *ngIf="loading()">Cargando…</div>
    <div *ngIf="!loading() && error()" class="text-red-600">Error: {{ error() }}</div>

    <ng-container *ngIf="!loading() && !error() && data() as d">
        <div class="space-y-2">
            <div><strong>Título:</strong> {{ d.title || 'Asemar — Notificación' }}</div>
            <div><strong>Mensaje:</strong> {{ d.body || '—' }}</div>
            <div *ngIf="d.meta as m" class="mt-4 border-t pt-3">
                <h2 class="font-medium mb-2">Datos del formulario</h2>
                <div><strong>Cliente:</strong> {{ m.cliente_id || '—' }}</div>
                <div><strong>Estado:</strong> {{ m.status || '—' }}</div>
                <div *ngIf="m.factura_url"><strong>Factura:</strong> <a [href]="m.factura_url" target="_blank"
                        rel="noopener">{{ m.factura_url }}</a></div>
                <div *ngIf="m.datos_faltan?.length">
                    <strong>Datos faltantes:</strong>
                    <ul class="list-disc list-inside">
                        <li *ngFor="let f of m.datos_faltan">{{ f }}</li>
                    </ul>
                </div>
            </div>

            <div class="text-sm text-gray-500 mt-2" *ngIf="d.ts">
                Recibido: {{ (d.ts * 1000) | date:'short' }}
            </div>
        </div>
    </ng-container>
</div>